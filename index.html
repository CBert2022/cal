<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalender-Event Download</title>
</head>
<body>
    <h1>Event: Weihnachten mit FreundInnen</h1>
    <p>Zusammengewürfeltes Weihnachtsdinner und gute Drinks - offizieller Start 14:00 Uhr. Wer vorher schon auf einen Glühwein und ein Märchen vorbeischauen will, ist herzlich willkommen.</p>
    
    <!-- Button zum Herunterladen des Events -->
    <a href="cal.ics" download="cal.ics">
        <button>Event in Kalender herunterladen</button>
    </a>

    <!-- Kalender Event als .ics Datei -->
    <textarea id="ics-data" style="display:none;">
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Deine Firma//Kalender Event//EN
BEGIN:VEVENT
UID:1234567890
DTSTAMP:20230925T090000Z
DTSTART:20241207T130000Z
DTEND:20241207T225900Z
SUMMARY:Weihnachten mit FreundenInnen
DESCRIPTION:Zusammengewürfeltes Weihnachtsdinner und gute Drinks - offizieller Start 14:00 Uhr. Wer vorher schon auf einen Glühwein und ein Märchen vorbeischauen will, ist herzlich willkommen.
LOCATION:bei Caro
END:VEVENT
END:VCALENDAR
    </textarea>

    <script>
        // Dynamisches Erstellen der ICS-Datei und Download-Button Funktion
        document.querySelector('a').addEventListener('click', function(e) {
            e.preventDefault();

            // Den ICS-Inhalt aus dem versteckten Textbereich abrufen
            var icsData = document.getElementById('ics-data').value;

            // Erstellen eines Blob-Objekts, um die Datei herunterzuladen
            var blob = new Blob([icsData], { type: 'text/calendar' });
            var url = window.URL.createObjectURL(blob);

            // Temporärer Link zum Herunterladen der Datei
            var a = document.createElement('a');
            a.href = url;
            a.download = 'cal.ics';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        });
    </script>
</body>
</html>
